language: c

os:
  - linux

before_install:
  - sudo apt-get update -y
  - sudo add-apt-repository --yes ppa:webupd8team/java
  #!/bin/bash

# You must accept the Oracle Binary Code License
# http://www.oracle.com/technetwork/java/javase/terms/license/index.html
# usage: get_jdk.sh <jdk_version> <ext>
# jdk_version: 8(default) or 9
# ext: rpm or tar.gz

jdk_version=${1:-8}
ext=${2:-rpm}

readonly url="http://www.oracle.com"
readonly jdk_download_url1="$url/technetwork/java/javase/downloads/index.html"
readonly jdk_download_url2=$(
    curl -s $jdk_download_url1 | \
    egrep -o "\/technetwork\/java/\javase\/downloads\/jdk${jdk_version}-downloads-.+?\.html" | \
    head -1 | \
    cut -d '"' -f 1
)
[[ -z "$jdk_download_url2" ]] && echo "Could not get jdk download url - $jdk_download_url1" >> /dev/stderr

readonly jdk_download_url3="${url}${jdk_download_url2}"
readonly jdk_download_url4=$(
    curl -s $jdk_download_url3 | \
    egrep -o "http\:\/\/download.oracle\.com\/otn-pub\/java\/jdk\/[8-9](u[0-9]+|\+).*\/jdk-${jdk_version}.*(-|_)linux-(x64|x64_bin).$ext"
)

for dl_url in ${jdk_download_url4[@]}; do
    wget --no-cookies \
         --no-check-certificate \
         --header "Cookie: oraclelicense=accept-securebackup-cookie" \
         -N $dl_url
done
  - sudo apt-get install oracle-java9-installer
  - sudo apt install oracle-java9-set-default
  - sudo apt-get install libncurses5-dev
  - sudo apt-get install git-core gnupg flex bison gperf
 
  - sudo apt-get install build-essential
  - sudo apt-get install zip
  - sudo apt-get install curl 
  - sudo apt-get install libc6-dev
  - sudo apt-get install libncurses5-dev:i386 
  - sudo apt-get install x11proto-core-dev libx11-dev:i386 libreadline6-dev:i386
  - sudo apt-get install libgl1-mesa-glx:i386 libgl1-mesa-dev 
  - sudo apt-get install g++-multilib tofrodos python-markdown
  - sudo apt-get install libxml2-utils xsltproc zlib1g-dev:i386
  - sudo  ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1 /usr/lib/i386-linux-gnu/libGL.so
  - sudo apt-get install -y ccache &&echo 'export PATH="/usr/lib/ccache:$PATH"' | tee -a ~/.bashrc &&source ~/.bashrc && echo $PATH
  - export USE_CCACHE=1

before_script:
# Download the toolchain
  - git clone --depth=50 --branch=uber-8.x https://github.com/kondors1995/aarch64-linux-android $HOME/UBER/8.x

# Download the Kernel Sources
  - git clone --depth=50 --branch=Strakz-Oreo https://github.com/revanthstrakz/StRaKz_KeRnEl_Mido  $HOME/SK

# Download AnyKernel2
script:
  - export ARCH=arm64
  - export KERNELDIR=$HOME/SK
  - cd $HOME/SK
  - chmod a+x SK/scripts/kernel.sh
  - ./SK/scripts/kernel.sh
